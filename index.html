<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>会一点PHP和Go的Junior Developer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="Go PHP Linux Mysql Redis">
<meta property="og:type" content="website">
<meta property="og:title" content="会一点PHP和Go的Junior Developer">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="会一点PHP和Go的Junior Developer">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="会一点PHP和Go的Junior Developer">
  
    <link rel="alternate" href="/atom.xml" title="会一点PHP和Go的Junior Developer" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">会一点PHP和Go的Junior Developer</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">天行健 君子以自强不息 地势坤 君子以厚德载物</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-aws_es" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/16/aws_es/" class="article-date">
  <time datetime="2019-07-15T16:00:00.000Z" itemprop="datePublished">2019-07-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/16/aws_es/">golang使用AWS ElasticSearch</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="用到了AWS-ElasticSearch，研究了一下，整理了一下研究过程"><a href="#用到了AWS-ElasticSearch，研究了一下，整理了一下研究过程" class="headerlink" title="用到了AWS ElasticSearch，研究了一下，整理了一下研究过程"></a>用到了AWS ElasticSearch，研究了一下，整理了一下研究过程</h3><p>AWS本身自带ElasticSearch服务，且可以方便的在本地布置Kibana，这个不需要多说，只需要去搜索文档执行即可。</p>
<p>AWS的ES首先是新建域，这个原来已经有服务，所以在这个基础要上新建index</p>
<p>研究了N久怎么建index，最后发现在kibana的Dev Tools用put命令即可</p>
<p>建好后，去找golang的Elastic包，最终决定使用github.com/olivere/elastic</p>
<p>然后推送数据，推送过程中发现并不需要先建index，在推送数据的时候如果index不存在会自动创建</p>
<p>推送成功后发现在Discover里找不到新建的index，研究良久，最后在kibana的Management里对index pattern有了怀疑，于是试着创建一个新的index pattern并指向新的index这个indices，创建后终于成功在Discover看到数据，搞定！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/16/aws_es/" data-id="cjy5p771z0000qn38nyyz6s2k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws/">aws</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux_s3cmd" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/22/linux_s3cmd/" class="article-date">
  <time datetime="2019-05-21T16:00:00.000Z" itemprop="datePublished">2019-05-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/22/linux_s3cmd/">在Linux安装s3cmd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="s3cmd是用于创建和管理数据到Amazon-S3存储命令行的实用程序。本文将帮助你如何在CentOS上安装s3cmd"><a href="#s3cmd是用于创建和管理数据到Amazon-S3存储命令行的实用程序。本文将帮助你如何在CentOS上安装s3cmd" class="headerlink" title="s3cmd是用于创建和管理数据到Amazon S3存储命令行的实用程序。本文将帮助你如何在CentOS上安装s3cmd"></a>s3cmd是用于创建和管理数据到Amazon S3存储命令行的实用程序。本文将帮助你如何在CentOS上安装s3cmd</h3><p>s3cmd 是用于创建S3桶，上传，检索和管理数据到Amazon S3存储命令行实用程序。 本文将帮助你如何在CentOS，RHEL，OpenSUSE系统，Ubuntu，Debian和LinuxMint系统上安装s3cmd，并通过简单的步骤命令行管理S3桶。 要在阅读文章Windows服务器安装s3cmd 在Windows中安装s3cmd。 我们还可以使用S3FS与FUSE在我们的系统本地驱动器安装S3存储桶。要配置阅读下一篇文章在Linux上安装S3存储 。 女将-S3-中心标志<br>安装s3cmd包<br>s3cmd是默认的RPM库针对CentOS，RHEL和Ubuntu系统上可用，您可以简单的在系统上执行以下命令进行安装。<br>在CentOS / RHEL：</p>
<pre><code># yum install s3cmd
</code></pre><p>在Ubuntu / Debian：</p>
<pre><code>$ sudo apt-get install s3cmd
</code></pre><p>在SUSE Linux Enterprise Server 11：</p>
<pre><code># zypper addrepo http://s3tools.org/repo/SLE_11/s3tools.repo
# zypper install s3cmd
</code></pre><p>使用Source安装最新s3cmd<br>如果使用上述软件包管理器s3cmd，你没有得到最新的版本，可以使用源代码，在系统上安装最新的s3cmd版本。访问此网址或者使用下面的命令来下载最新版本的s3cmd。</p>
<pre><code>$ wget http://ufpr.dl.sourceforge.net/project/s3tools/s3cmd/1.6.1/s3cmd-1.6.1.tar.gz
$ tar xzf s3cmd-1.6.1.tar.gz 
</code></pre><p>现在，使用下面的命令与源文件进行安装。</p>
<pre><code>$ cd s3cmd-1.6.1
$ sudo python setup.py install
</code></pre><p>配置s3cmd环境<br>为了配置s3cmd我们将要求有您S3 Amazon帐户访问key和钥匙。获取安全密钥AWS securityCredentials 。将提示登录到您的Amazon帐户。 获取密钥文件后，请使用以下命令来配置s3cmd。</p>
<pre><code># s3cmd --configure
</code></pre><pre><code>Enter new values or accept defaults in brackets with Enter.
Refer to user manual for detailed description of all options.

Access key and Secret key are your identifiers for Amazon S3
Access Key: xxxxxxxxxxxxxxxxxxxxxx
Secret Key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Encryption password is used to protect your files from reading
by unauthorized persons while in transfer to S3
Encryption password: xxxxxxxxxx
Path to GPG program [/usr/bin/gpg]:

When using secure HTTPS protocol all communication with Amazon S3
servers is protected from 3rd party eavesdropping. This method is
slower than plain HTTP and can&#39;t be used if you&#39;re behind a proxy
Use HTTPS protocol [No]: Yes

New settings:
  Access Key: xxxxxxxxxxxxxxxxxxxxxx
  Secret Key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  Encryption password: xxxxxxxxxx
  Path to GPG program: /usr/bin/gpg
  Use HTTPS protocol: True
  HTTP Proxy server name:
  HTTP Proxy server port: 0

Test access with supplied credentials? [Y/n] Y
Please wait, attempting to list all buckets...
Success. Your access key and secret key worked fine :-)

Now verifying that encryption works...
Success. Encryption and decryption worked fine :-)

Save settings? [y/N] y
Configuration saved to &#39;/root/.s3cfg&#39;
</code></pre><p>s3cmd命令行的使用<br>一旦配置成功完成。现在找到下面的命令细节，如何使用命令管理S3桶。<br>1.列出全部S3桶<br>使用以下命令列出在您的AWS账户中的所有S3桶。</p>
<pre><code># s3cmd ls
</code></pre><p>2.创建新桶<br>要在下面的命令Amazon S3上使用的新桶。这将创建S3帐户名为howtoing桶。</p>
<pre><code># s3cmd mb s3://howtoing
Bucket &#39;s3://howtoing/&#39; created
</code></pre><ol start="3">
<li>上传文件到S3桶<br>以下命令将使用s3cmd命令上传文件file.txt的到S3桶。<pre><code># s3cmd put file.txt s3://howtoing/
file.txt -&gt; s3://howtoing/file.txt  [1 of 1]
190216 of 190216   100% in    0s  1668.35 kB/s  done
</code></pre></li>
</ol>
<p>4.上传文件夹到s3桶<br>如果我们需要上传整个目录使用-r递归上传，像下面这样。</p>
<pre><code># s3cmd put -r backup s3://howtoing/

backup/file1.txt -&gt; s3://howtoing/backup/file1.txt  [1 of 2]
 9984 of 9984   100% in    0s    18.78 kB/s  done
backup/file2.txt -&gt; s3://howtoing/backup/file2.txt  [2 of 2]
 0 of 0     0% in    0s     0.00 B/s  done 
</code></pre><p>请确保您上传目录的结尾没有斜杠 / （如：backup/），否则将只上传备份目录中的内容。</p>
<pre><code># s3cmd put -r backup/ s3://howtoing/

backup/file1.txt -&gt; s3://howtoing/file1.txt  [1 of 2]
 9984 of 9984   100% in    0s    21.78 kB/s  done
backup/file2.txt -&gt; s3://howtoing/file2.txt  [2 of 2]
 0 of 0     0% in    0s     0.00 B/s  done
</code></pre><p>5.列出S3存储数据<br>使用 ls 与 s3cmd 切换目录S3桶的对象。</p>
<pre><code># s3cmd ls s3://howtoing/

                       DIR   s3://howtoing/backup/
2013-09-03 10:58    190216   s3://howtoing/file.txt
</code></pre><p>6.从s3下载文件<br>有些时候，如果我们需要从S3下载文件，使用下面的命令来下载。</p>
<pre><code># s3cmd get s3://howtoing/file.txt

s3://howtoing/file.txt -&gt; ./file.txt  [1 of 1]
 4 of 4   100% in    0s    10.84 B/s  done
</code></pre><p>7.删除S3桶的数据<br>要删除的文件夹都是从S3桶使用下面的命令。</p>
<pre><code> Removing file from s3 bucket 
# s3cmd del s3://howtoing/file.txt

File s3://howtoing/file.txt deleted

 Removing directory from s3 bucket 
# s3cmd del s3://howtoing/backup

File s3://howtoing/backup deleted
</code></pre><p>8.卸下S3桶<br>如果我们不需要S3存储，我们可以用下面的命令直接删除它。取出桶之前，请确保它是空的。</p>
<pre><code># s3cmd rb s3://howtoing

ERROR: S3 error: 409 (BucketNotEmpty): The bucket you tried to delete is not empty
</code></pre><p>上面的命令失败，因为S3桶不为空 要删除s3 桶先删除里面所有对象，然后再次使用命令。</p>
<pre><code># s3cmd rb s3://howtoing

Bucket &#39;s3://howtoing/&#39; removed
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/22/linux_s3cmd/" data-id="cjy5p773m0011qn38zkc1ox9s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws/">aws</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-golang_x_failed" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/16/golang_x_failed/" class="article-date">
  <time datetime="2019-05-15T16:00:00.000Z" itemprop="datePublished">2019-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/16/golang_x_failed/">解决 golang获取 golang.org/x 包失败的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="git-获取golang-org-x包失败"><a href="#git-获取golang-org-x包失败" class="headerlink" title="git 获取golang.org/x包失败"></a>git 获取golang.org/x包失败</h2><pre><code>go get
package golang.org/x/net/websocket: unrecognized import path 
&quot;golang.org/x/net/websocket&quot; (https fetch: Get https://golang.org/x/net/websocket?go-get=1: 
dial tcp 216.239.37.1:443: i/o timeout)
</code></pre><p>加上代理，还是不行<br>解决方法<br>golang 在 github 上建立了一个镜像库，如 <a href="https://github.com/golang/net" target="_blank" rel="noopener">https://github.com/golang/net</a> 即是 <a href="https://golang.org/x/net" target="_blank" rel="noopener">https://golang.org/x/net</a> 的镜像库<br>手动的去这个库拉就到指定目录就行了，没有目录就创建</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/16/golang_x_failed/" data-id="cjy5p773g000rqn38cw6cc678" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-xiaoyouxi" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/06/xiaoyouxi/" class="article-date">
  <time datetime="2019-05-05T16:00:00.000Z" itemprop="datePublished">2019-05-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/06/xiaoyouxi/">解决微信小游戏request fail unexpected end of ZLI</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>微信小游戏ios没问题，android版始终不能使用<br>console发现报错 request fail unexpected end of ZLI，</p>
<p>查这个错误是Java io流错误的返回，抓包看了接口，思索良久突然发现header里的gzip压缩，感觉应该是gzip压缩后android版小程序里面不能识别对应的压缩算法，返回里把gzip压缩去掉<br>正常</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/06/xiaoyouxi/" data-id="cjy5p773t001cqn388xjvxyf7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-golang_http_get_unpected" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/01/golang_http_get_unpected/" class="article-date">
  <time datetime="2019-03-31T16:00:00.000Z" itemprop="datePublished">2019-04-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/01/golang_http_get_unpected/">golang Http ioutil.ReadAll 惊现 Unexpected EOF解决办法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天用Golang 读取Get请求接口在走到 ioutil.ReadAll 碰到 Unexpected EOF，原代码如下</p>
<pre><code class="go">    url := &quot;&quot;

    client := &amp;http.Client{}

    req, err := http.NewRequest(&quot;GET&quot;, url, nil)
    req.Close = true

    resp, err := client.Do(req)
    if err != nil {
        fmt.Println(`aaaaaa`)
        return nil, (err)
    }

    defer resp.Body.Close()
    body, err := ioutil.ReadAll(resp.Body)
    if err != nil {
        fmt.Println(`bbbbbb`)
        return ms, err
    }

</code></pre>
<p>当然，还是Google，最后发现返回是gzip压缩过的，而直接获取是获取不到的，所以要加设置要求接口明码返回</p>
<pre><code>req.Header.Add(&quot;Accept-Encoding&quot;, &quot;identity&quot;)
</code></pre><p>注：资料来源<a href="https://stackoverflow.com/questions/21147562/unexpected-eof-using-go-http-client" target="_blank" rel="noopener">https://stackoverflow.com/questions/21147562/unexpected-eof-using-go-http-client</a></p>
<p>It looks like the that server (Apache 1.3, wow!) is serving up a truncated gzip response. If you explicitly request the identity encoding (preventing the Go transport from adding gzip itself), you won’t get the ErrUnexpectedEOF:</p>
<p>这句话是这么理解的吧？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/01/golang_http_get_unpected/" data-id="cjy5p7732000gqn38o9x5uvn6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mac_proxy" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/28/mac_proxy/" class="article-date">
  <time datetime="2019-03-27T16:00:00.000Z" itemprop="datePublished">2019-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/28/mac_proxy/">macOS 终端通过代理访问网络的方法(包括ssh)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>终端是默认不会走代理的（一直以为是会），今天网络问题始终连不上AWS的服务器，没办法找解决办法。<br>在终端试一下当前出口：</p>
<pre><code>curl cip.cc
</code></pre><p>返回</p>
<pre><code>IP    : ********
地址    : 中国  上海
运营商    : 联通

数据二    : 上海市 | 联通

数据三    : 中国上海上海市 | 联通

URL    : http://www.cip.cc/**********
</code></pre><p>说明确实不走代理， 因为shadowsocks是全局模式，web看到的出口是香港<br>解决方法：（比较喜欢在当前终端解决问题，不修改全局，有问题关掉这个终端窗口就没事了）</p>
<pre><code>vim .bash_profile
</code></pre><p>加入</p>
<pre><code># proxy list
alias proxy=&#39;export all_proxy=socks5://127.0.0.1:1086&#39; #1086不是写死的端口，是根据每个人本地socks5真是端口
alias unproxy=&#39;unset all_proxy&#39;
</code></pre><p>OK，让配置生效</p>
<pre><code>source ~/.bash_profile
</code></pre><p>这个终端proxy别名就生效了，于是开始设置代理生效</p>
<pre><code>proxy
</code></pre><p>再次查看出口</p>
<pre><code>curl cip.cc

IP    : **********
地址    : 中国  香港 

数据二    : 香港 | 特别行政区

数据三    : 中国香港香港

URL    : http://www.cip.cc/***************
</code></pre><p>生效。</p>
<p>本来以为这样就可以解决ssh连不上AWS的问题，结果当然不行，原因嘛，应该如下：<br>socks,http代理等使用的是TCP或UDP协议, 而ping命令则是ICMP协议, 所以proxychains4对ping命令无效<br>想当然这样以为吧，大致是这个方向的原因。</p>
<p>总得解决，因为让终端走代理的最终目的是为了ssh到AWS啊<br>还是G找<br>终于发现一个最简易的问题<br>命令</p>
<pre><code>ssh myserver -o &quot;ProxyCommand=nc -X 5 -x 127.0.0.1:1086 %h %p&quot;
</code></pre><p>终于就走了代理，服气</p>
<p>当然还有个没试过的复杂方法，也记录一下</p>
<pre><code>vim ~/.ssh/config
# 添加以下内容
Host 52.* # 这里可以通配也可以指定IP
    ProxyCommand nc -X 5 -x 127.0.0.1:1079 %h %p
    # &quot;5&quot; 是 SOCKS 5, &quot;1079&quot; 是本地socks端口
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/28/mac_proxy/" data-id="cjy5p773o0015qn38ovcpnaj7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mac-os/">mac os</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mysql_install" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/21/mysql_install/" class="article-date">
  <time datetime="2019-01-21T07:27:48.000Z" itemprop="datePublished">2019-01-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/21/mysql_install/">Ubuntu 安装 mysql</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>wget <a href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.25-linux-glibc2.12-x86_64.tar.gz" target="_blank" rel="noopener">https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.25-linux-glibc2.12-x86_64.tar.gz</a><br>tar xvf mysql-5.7.25-linux-glibc2.12-x86_64.tar.gz<br>mv mysql/ /usr/local/<br>useradd mysql<br>mkdir mydata<br>mkdir mydata/data<br>chown -R mysql mysql/<br>vim /etc/my.cnf</p>
<pre><code>[client]
port = 3306
socket = /tmp/mysql.sock

[mysqld]
character_set_server=utf8
init_connect=&#39;SET NAMES utf8&#39;
basedir=/usr/local/mysql
datadir=/usr/local/mysql/mydata/data
socket=/tmp/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/usr/local/mysql/mysqld.pid
lower_case_table_names = 1
user=mysql

sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
max_connections=1000
</code></pre><p>这里的内容尽量不要有改变，要不然会有不可预测问题</p>
<p>touch /var/log/mysqld.log<br>chmod 777 /var/log/mysqld.log<br>touch /var/run/mysqld/mysqld.pid<br>chmod 777 /var/run/mysqld</p>
<p>安装 libaio<br>apt-get install libaio-dev</p>
<p>/usr/local/mysql/bin/mysqld –initialize –user=mysql –basedir=/usr/local/mysql –datadir=/usr/local/mysql/mydata/data –lc_messages_dir=/usr/local/mysql/share –lc_messages=en_US</p>
<p>touch mysqld.pid<br>chmod 777 mysqld.pid<br>chown mysql.mysql mysqld.pid<br>support-files/mysql.server start</p>
<p>加入系统服务<br>cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld<br>Ubuntu<br>update-rc.d mysqld defaults<br>centOs<br>chkconfig –add mysqld<br>chkconfig –level 2345 mysqld on</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/21/mysql_install/" data-id="cjy5p773q0017qn38l5a17k12" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-golang_cvs" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/17/golang_cvs/" class="article-date">
  <time datetime="2019-01-16T16:00:00.000Z" itemprop="datePublished">2019-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/17/golang_cvs/">golang csv文件操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一、写csv文件</p>
<p>函数：</p>
<pre><code>func NewWriter(w io.Writer) *Writer

func (w *Writer) Flush()

func (w *Writer) Write(record []string) (err os.Error)

func (w *Writer) WriteAll(records [][]string) (err os.Error)
</code></pre><p>demo</p>
<pre><code>package main

import (
    &quot;bytes&quot;
    &quot;encoding/csv&quot;
    &quot;fmt&quot;
    &quot;os&quot;
)

func main() {
    fileName := &quot;2.csv&quot;
    buf := new(bytes.Buffer)
    r2 := csv.NewWriter(buf)
    for i := 0; i &lt; 10; i++ {
        s := make([]string, 3)
        s[0] = &quot;user id&quot;
        s[1] = &quot;name&quot;
        s[2] = &quot;depart&quot;
        r2.Write(s)
        r2.Flush()
    }
    fmt.Println(buf)
    fout, err := os.Create(fileName)
    defer fout.Close()
    if err != nil {
        fmt.Println(fileName, err)
        return
    }
    fout.WriteString(buf.String())
}

</code></pre><p>二、读csv文件</p>
<p>函数：</p>
<pre><code>func NewReader(r io.Reader) *Reader

func (r *Reader) Read() (record []string, err os.Error)

func (r *Reader) ReadAll() (records [][]string, err os.Error)
</code></pre><p>demo</p>
<pre><code>package main

import (
    &quot;encoding/csv&quot;
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
    &quot;strings&quot;
)

func main() {
    //fileName := &quot;1.csv&quot;
    fmt.Printf(&quot;Input file name : &quot;)
    var fileName string
    fmt.Scanf(&quot;%s&quot;, &amp;fileName)
    cntb, err := ioutil.ReadFile(fileName)
    if err != nil {
        panic(err)
    }
    r2 := csv.NewReader(strings.NewReader(string(cntb)))
    ss, _ := r2.ReadAll()
    //fmt.Println(ss)
    sz := len(ss)
    for i := 0; i &lt; sz; i++ {
        fmt.Println(ss[i])
    }
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/17/golang_cvs/" data-id="cjy5p772t000aqn381iw89lu8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-golang_map_keng" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/09/golang_map_keng/" class="article-date">
  <time datetime="2019-01-09T07:27:48.000Z" itemprop="datePublished">2019-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/09/golang_map_keng/">golang  map的排序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>老是掉进golang数据结构map的坑里，PHP习惯了只有数组一种结构，老是会把map想成PHP不是默认key的数组，其实最大的不同就是map是随机排序的，以后用map的时候要提醒自己是不是有排序需求</p>
<h2 id="golang-map按key排序"><a href="#golang-map按key排序" class="headerlink" title="golang map按key排序"></a>golang map按key排序</h2><pre><code>//golang的map不保证有序性，所以按key排序需要取出key，对key排序，再遍历输出value
package main

import (
    &quot;fmt&quot;
    &quot;sort&quot;
)

func main() {
    // To create a map as input
    m := make(map[int]string)
    m[1] = &quot;a&quot;
    m[2] = &quot;c&quot;
    m[0] = &quot;b&quot;

    // To store the keys in slice in sorted order
    var keys []int
    for k := range m {
        keys = append(keys, k)
    }
    sort.Ints(keys)

    // To perform the opertion you want
    for _, k := range keys {
        fmt.Println(&quot;Key:&quot;, k, &quot;Value:&quot;, m[k])
    }
}
</code></pre><h2 id="golang-map按value排序"><a href="#golang-map按value排序" class="headerlink" title="golang map按value排序"></a>golang map按value排序</h2><pre><code>//要对golang map按照value进行排序，思路是直接不用map，用struct存放key和value，实现sort接口，就可以调用sort.Sort进行排序了。
// A data structure to hold a key/value pair.
type Pair struct {
    Key   string
    Value int
}

// A slice of Pairs that implements sort.Interface to sort by Value.
type PairList []Pair

func (p PairList) Swap(i, j int)      { p[i], p[j] = p[j], p[i] }
func (p PairList) Len() int           { return len(p) }
func (p PairList) Less(i, j int) bool { return p[i].Value &lt; p[j].Value }

// A function to turn a map into a PairList, then sort and return it.
func sortMapByValue(m map[string]int) PairList {
    p := make(PairList, len(m))
    i := 0
    for k, v := range m {
        p[i] = Pair{k, v}
        i ++
    }
    sort.Sort(p)
    return p
}

</code></pre><h2 id="golang-map递增排序"><a href="#golang-map递增排序" class="headerlink" title="golang map递增排序"></a>golang map递增排序</h2><pre><code>//sort.Sort是递增排序，如果要实现递减排序，用sort.Reverse
package main

import (
    &quot;fmt&quot;
    &quot;sort&quot;
)

func main() {
    a := []int{4,3,2,1,5,9,8,7,6}
    sort.Sort(sort.Reverse(sort.IntSlice(a)))
    fmt.Println(&quot;After reversed: &quot;, a)
}
</code></pre><h2 id="golang-map-排序的稳定性"><a href="#golang-map-排序的稳定性" class="headerlink" title="golang map 排序的稳定性"></a>golang map 排序的稳定性</h2><pre><code>//sort不保证排序的稳定性（两个相同的值，排序之后相对位置不变），排序的稳定性由sort.Stable来保证。
package main

import (
    &quot;fmt&quot;
    &quot;sort&quot;
)

type person struct {
  Name string
  Age int
}

type personSlice []person

func (s personSlice) Len() int { return len(s) }
func (s personSlice) Swap(i, j int) { s[i], s[j] = s[j], s[i] }
func (s personSlice) Less(i, j int) bool { return s[i].Age &lt; s[j].Age }

func main() {
    a := personSlice {
      {
        Name: &quot;AAA&quot;,
        Age: 55,
      },
      {
        Name: &quot;BBB&quot;,
        Age: 22,
      },
      {
        Name: &quot;CCC&quot;,
        Age: 0,
      },
      {
        Name: &quot;DDD&quot;,
        Age: 22,
      },
      {
        Name: &quot;EEE&quot;,
        Age: 11,
      },  
    }
    sort.Stable(a)
    fmt.Println(a)
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/09/golang_map_keng/" data-id="cjy5p772x000fqn38gtc9tigi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-golangerrshadow" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/20/golangerrshadow/" class="article-date">
  <time datetime="2018-12-19T16:00:00.000Z" itemprop="datePublished">2018-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/20/golangerrshadow/">golang 操作符:= 造成的err is shadowed during return</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天在编译代码时发生了一个错误</p>
<pre><code>221:4: err is shadowed during return
</code></pre><p>错误范围代码</p>
<pre><code>for _, v := range scontent {
        tmp := strings.Split(v, `;`)
        labels = append(labels, tmp[0])
        g, err := strconv.Atoi(tmp[3])
        if len(tmp[0]) == 0 || len(tmp[1]) == 0 || len(tmp[2]) == 0 || err != nil || g &lt;= 2010 {
            err = err_student_data
            return
        }
    }
</code></pre><p>从错误本身理解是返回值err 被遮盖重新定义了，不再是方法的返回值了。<br>根据错误提示肯定是</p>
<pre><code>g, err := strconv.Atoi(tmp[3])
</code></pre><p>发生了错误， 提示既是err被重新定义了，  那就是操作符 := 的问题了<br>Golang的:=操作符理解为 </p>
<pre><code>是声明并赋值，并且系统自动推断类型，不需要var关键字
</code></pre><p>另外Golang的for是独立的作用域，所以for里面用了  := ， err本来是希望继承外面变量的作用域的， 但是在这里被重新定义为了一个新的变量造成了错误，  看来Golang还不够智能。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/20/golangerrshadow/" data-id="cjy5p773e000pqn38ryf1mn0c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crontab/">crontab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git-linux/">git linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac-os/">mac os</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql-node-js/">mysql node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机系统/">计算机系统</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/aws/" style="font-size: 13.33px;">aws</a> <a href="/tags/crontab/" style="font-size: 13.33px;">crontab</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/git-linux/" style="font-size: 10px;">git linux</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/linux/" style="font-size: 16.67px;">linux</a> <a href="/tags/mac-os/" style="font-size: 13.33px;">mac os</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mysql/" style="font-size: 13.33px;">mysql</a> <a href="/tags/mysql-node-js/" style="font-size: 10px;">mysql node.js</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/计算机系统/" style="font-size: 10px;">计算机系统</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2001/08/">August 2001</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/16/aws_es/">golang使用AWS ElasticSearch</a>
          </li>
        
          <li>
            <a href="/2019/05/22/linux_s3cmd/">在Linux安装s3cmd</a>
          </li>
        
          <li>
            <a href="/2019/05/16/golang_x_failed/">解决 golang获取 golang.org/x 包失败的方法</a>
          </li>
        
          <li>
            <a href="/2019/05/06/xiaoyouxi/">解决微信小游戏request fail unexpected end of ZLI</a>
          </li>
        
          <li>
            <a href="/2019/04/01/golang_http_get_unpected/">golang Http ioutil.ReadAll 惊现 Unexpected EOF解决办法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Cli<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>